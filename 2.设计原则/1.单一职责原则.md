# 1. 单一职责原则（SRP）

## 1.1 定义

单一职责原则的英文是 Single Responsibility Principle，缩写为 SRP。这个原则的英文描述是这样的：A class or module should have a single responsibility。如果把它翻译成中文，那就是：一个类或者模块只负责完成一个职责（或者功能）。

一个类只负责完成一个职责或者功能。**不要设计大而全的类，要设计粒度小、功能单一的类。单一职责原则是为了实现代码高内聚、低耦合，提高代码的复用性、可读性、可维护性**。

## 1.2 缺点

该原则提出对象不应该承担太多职责，如果一个对象承担了太多的职责，至少存在以下两个缺点：

1. 一个职责的变化可能会削弱或者抑制这个类实现其他职责的能力；
2. 当客户端需要该对象的某一个职责时，不得不将其他不需要的职责全都包含进来，从而造成冗余代码或代码的浪费。

## 1.3 优点

单一职责原则的核心就是**控制类的粒度大小、将对象解耦、提高其内聚性**。如果遵循单一职责原则将有以下优点。

- **降低类的复杂度**。一个类只负责一项职责，其逻辑肯定要比负责多项职责简单得多。
- **提高类的可读性**。复杂性降低，自然其可读性会提高。
- **提高系统的可维护性**。可读性提高，那自然更容易维护了。
- **变更引起的风险降低**。变更是必然的，如果单一职责原则遵守得好，当修改一个功能时，可以显著降低对其他功能的影响。

# 2.如何判断类的职责是否足够单一？

不同的应用场景、不同阶段的需求背景、不同的业务层面，对同一个类的职责是否单一，可能会有不同的判定结果。实际上，一些侧面的判断指标更具有指导意义和可执行性，比如，出现下面这些情况就有可能说明这类的设计不满足单一职责原则：

- 类中的代码行数、函数或者属性过多；会影响代码的可读性和可维护性。
- 类依赖的其他类过多，或者依赖类的其他类过多；不符合高内聚、低耦合的设计思想。
- 私有方法过多；
- 比较难给类起一个合适的名字；说明类的职责定义得可能不够清晰。
- 类中大量的方法都是集中操作类中的某几个属性。

综上所述，评价一个类的职责是否足够单一，并没有一个非常明确的、可以量化的标准，可以说，这是件非常主观、仁者见仁智者见智的事情。实际上，在真正的软件开发中，我们也没必要过于未雨绸缪，过度设计。所以，**可以先写一个粗粒度的类，满足业务需求。随着业务的发展，如果粗粒度的类越来越庞大，代码越来越多，这个时候，我们就可以将这个粗粒度的类，拆分成几个更细粒度的类。这就是所谓的持续重构**。

# 3. 类的职责是否设计得越单一越好？

单一职责原则通过避免设计大而全的类，避免将不相关的功能耦合在一起，来提高类的内聚性。同时，类职责单一，类依赖的和被依赖的其他类也会变少，减少了代码的耦合性，以此来实现代码的高内聚、低耦合。但是，如果拆分得过细，实际上会适得其反，反倒会降低内聚性，也会影响代码的可维护性。



